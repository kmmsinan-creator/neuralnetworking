<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Titanic Survivors' Tales — EDA Dashboard</title>

<!-- Client-side libraries -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<style>
:root {
  --ink:#ffffff; 
  --muted:#cccccc;
  --shadow:0 14px 35px rgba(0,0,0,.6);
}

* {
  box-sizing:border-box;
  margin:0; padding:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
}

body {
  min-height:100vh;
  background: url("https://upload.wikimedia.org/wikipedia/commons/f/fd/RMS_Titanic_3.jpg") no-repeat center center fixed;
  background-size: cover;
  color:var(--ink);
  padding:28px;
}

body::before {
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.7); /* dark overlay so content is visible */
  z-index:-1;
}

.container {
  max-width:1200px;
  margin:0 auto;
  background:rgba(20,20,30,0.85); /* translucent dark panel */
  border-radius:16px;
  padding:20px;
  box-shadow:var(--shadow);
}

.header {
  text-align:center;
  margin-bottom:20px;
}

.header h1 {
  font-size:2rem;
  margin-bottom:8px;
}

.header p {
  color:var(--muted);
}

.grid {
  display:grid;
  gap:20px;
  margin-top:20px;
}

.cols-2 {
  grid-template-columns:repeat(2,minmax(0,1fr));
}

@media(max-width:900px){
  .cols-2 { grid-template-columns:1fr; }
}

.card {
  background:rgba(0,0,0,0.6);
  padding:16px;
  border-radius:12px;
  box-shadow:var(--shadow);
}

.card h3 {
  margin-bottom:8px;
}

.chart {
  position:relative;
  height:280px;
}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Titanic Survivors' Tales — Dashboard</h1>
      <p>Exploratory Data Analysis (EDA) of Titanic Dataset</p>
    </div>

    <div class="grid cols-2">
      <div class="card">
        <h3>Survival by Gender</h3>
        <canvas id="genderChart" class="chart"></canvas>
      </div>
      <div class="card">
        <h3>Survival by Class</h3>
        <canvas id="classChart" class="chart"></canvas>
      </div>
      <div class="card">
        <h3>Embarkation Port</h3>
        <canvas id="embarkChart" class="chart"></canvas>
      </div>
      <div class="card">
        <h3>Age Distribution</h3>
        <canvas id="ageChart" class="chart"></canvas>
      </div>
      <div class="card">
        <h3>Fare Distribution</h3>
        <canvas id="fareChart" class="chart"></canvas>
      </div>
    </div>
  </div>

<script>
const CSV_URL = 'train.csv';

// Titanic-specific color palettes
const palettes = {
  gender: ['#ff9999','#6699ff'],             // Female pink, Male blue
  pclass: ['#ffd700','#c0c0c0','#cd7f32'],   // Gold, Silver, Bronze
  embark: ['#66cc99','#ff9966','#9966cc'],   // S, C, Q
  age: ['#66e0ff','#ffa366'],               
  fare: ['#ffcc66','#66b3ff'],
  default: ['#ffcc66','#ff9999','#66e0ff','#d9b3ff','#ffb366']
};

function drawChart(ctx, type, labels, data, title, paletteKey){
  const colors = palettes[paletteKey] || palettes.default;
  return new Chart(ctx, {
    type,
    data: { 
      labels, 
      datasets: [{
        label:title, 
        data, 
        borderWidth:2, 
        fill:type==='line'?false:true, 
        tension:0.2,
        backgroundColor: colors,
        borderColor:'#fff'
      }]
    },
    options: {
      responsive:true, maintainAspectRatio:false,
      plugins:{ 
        legend:{labels:{color:'#fff'}}, 
        title:{display:false} 
      },
      scales:(type==='pie'||type==='doughnut')?{}:{
        y:{ beginAtZero:true, ticks:{ color:'#fff' } },
        x:{ ticks:{ color:'#fff' } }
      }
    }
  });
}

// Load data and create charts
Papa.parse(CSV_URL, {
  download:true,
  header:true,
  complete: function(results){
    const data = results.data;

    let male=0,female=0;
    let class1=0,class2=0,class3=0;
    let S=0,C=0,Q=0;
    let ageBins=[0,0,0,0,0,0];
    let fareLow=0,fareMid=0,fareHigh=0;

    data.forEach(row=>{
      if(row.Sex==="male") male++; else if(row.Sex==="female") female++;
      if(row.Pclass==="1") class1++; else if(row.Pclass==="2") class2++; else if(row.Pclass==="3") class3++;
      if(row.Embarked==="S") S++; else if(row.Embarked==="C") C++; else if(row.Embarked==="Q") Q++;

      let age=parseFloat(row.Age);
      if(!isNaN(age)){
        if(age<10) ageBins[0]++; 
        else if(age<20) ageBins[1]++; 
        else if(age<30) ageBins[2]++; 
        else if(age<40) ageBins[3]++; 
        else if(age<50) ageBins[4]++; 
        else ageBins[5]++;
      }

      let fare=parseFloat(row.Fare);
      if(!isNaN(fare)){
        if(fare<10) fareLow++;
        else if(fare<50) fareMid++;
        else fareHigh++;
      }
    });

    drawChart(document.getElementById('genderChart'),'doughnut',['Female','Male'],[female,male],'Survival by Gender','gender');
    drawChart(document.getElementById('classChart'),'pie',['1st','2nd','3rd'],[class1,class2,class3],'Survival by Class','pclass');
    drawChart(document.getElementById('embarkChart'),'pie',['Southampton','Cherbourg','Queenstown'],[S,C,Q],'Embarkation','embark');
    drawChart(document.getElementById('ageChart'),'bar',['0-10','10-20','20-30','30-40','40-50','50+'],ageBins,'Age Distribution','age');
    drawChart(document.getElementById('fareChart'),'bar',['Low (<10)','Medium (10-50)','High (>50)'],[fareLow,fareMid,fareHigh],'Fare Distribution','fare');
  }
});
</script>
</body>
</html>
