<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Titanic Binary Classifier (TF.js)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- TensorFlow.js and tfjs-vis CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@latest"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    <style>
        body { font-family: Roboto, Arial, sans-serif; margin: 0; padding: 0; background: #f7f8fa; }
        .container { max-width: 800px; margin: auto; background:#fff; padding:24px; box-shadow:0 0 8px #ccc; }
        h2 { margin-top: 32px; }
        section { margin-bottom: 32px; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 16px;}
        th, td { border: 1px solid #ddd; padding: 6px; text-align: left;}
        th { background: #eef; }
        @media(max-width:600px){.container{padding:10px;} th,td{font-size:12px;}}
        button, input[type="file"], select { margin: 6px 0; }
        .metrics {display: flex; flex-wrap: wrap; gap: 20px;}
        .metrics > div {flex: 1;}
        .slider-row label { margin-right: 10px;}
    </style>
</head>
<body>
    <div class="container">
        <h1>Titanic Shallow Classifier in Browser (TF.js)</h1>

        <section>
            <h2>Data Load</h2>
            <label>Train CSV: <input type="file" id="train-file" accept=".csv"></label>
            <label>Test CSV: <input type="file" id="test-file" accept=".csv"></label>
            <button id="load-btn">Load Data</button>
            <div id="data-status"></div>
            <button id="inspect-btn" disabled>Inspect</button>
        </section>

        <section>
            <h2>Preprocessing</h2>
            <button id="preprocess-btn" disabled>Preprocess</button>
            <label><input type="checkbox" id="add-family-features">Add FamilySize &amp; IsAlone features</label>
            <div id="preprocessing-output"></div>
        </section>

        <section>
            <h2>Model</h2>
            <button id="create-model-btn" disabled>Create Model</button>
            <div id="model-summary"></div>
        </section>

        <section>
            <h2>Training</h2>
            <button id="train-btn" disabled>Train Model</button>
            <div id="training-status"></div>
        </section>

        <section>
            <h2>Metrics &amp; Evaluation</h2>
            <div class="slider-row">
                <label>Threshold:
                    <input type="range" id="threshold-slider" min="0" max="1" step="0.01" value="0.5" disabled>
                    <span id="threshold-value">0.50</span>
                </label>
            </div>
            <div id="confusion-matrix"></div>
            <div id="performance-metrics"></div>
            <div id="charts"></div>
        </section>

        <section>
            <h2>Prediction</h2>
            <button id="predict-btn" disabled>Predict Test.csv</button>
            <div id="prediction-output"></div>
        </section>

        <section>
            <h2>Export</h2>
            <button id="export-btn" disabled>Export (Submission/Probs/Model)</button>
            <div id="export-status"></div>
        </section>

        <section>
            <h2>Deployment Notes</h2>
            <p>Create public GitHub repo, commit <b>index.html</b> / <b>app.js</b>, enable Pages (main/root), test URL.</p>
        </section>

        <section>
            <h2>Data Preview</h2>
            <div id="data-preview"></div>
            <div id="data-stats"></div>
        </section>
    </div>
    <script src="app.js"></script>
</body>
</html>
